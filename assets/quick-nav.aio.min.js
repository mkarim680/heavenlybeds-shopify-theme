/*
Generated time: March 25, 2025 10:34
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("quick-nav")){class a extends HTMLElement{constructor(){super(),this.childSelect=this.querySelector('custom-select[data-level="2"]'),this.grandchildSelect=this.querySelector('custom-select[data-level="3"]'),this.submitButton=this.querySelector(".js-submit"),this.priceRange=this.querySelector(".js-quick-nav-price"),this.addEventListener("change",this.handleQuickNavChange),this.addEventListener("click",this.handleQuickNavClick)}handleQuickNavClick(){var e=this.closest("slide-show");e&&"true"===e.dataset.autoplay&&(e=e.querySelector(".autoplay-btn"))&&e.click()}handleQuickNavChange(e){if(e.target.matches("custom-select")&&e.detail.selectedValue){var t=e.target.querySelector('[aria-selected="true"]');this.url=t.dataset.url,this.updateSubmitButton(t.dataset.url),t.dataset.isCollection?this.parseCollectionInfo(t.dataset.url):this.unparseCollectionInfo(),"1"===e.target.dataset.level&&this.childSelect?(a.prepareSelect(this.childSelect,e.detail.selectedValue),a.resetSelect(this.grandchildSelect,!0)):"2"===e.target.dataset.level&&this.grandchildSelect&&a.prepareSelect(this.grandchildSelect,e.detail.selectedValue)}else if(e.target.closest(".price-range")){var t=this.priceRange.querySelector("[name='filter.v.price.gte']").value,i=this.priceRange.querySelector("[name='filter.v.price.lte']").value;let e=this.url;t&&(e=e.includes("?")?e+"&":e+"?",e+="filter.v.price.gte="+t),i&&(e=e.includes("?")?e+"&":e+"?",e+="filter.v.price.lte="+i),this.updateSubmitButton(e),this.parseCollectionInfo(e)}else a.resetSelect(e.target,!1)}async parseCollectionInfo(e){this.submitButton.ariaDisabled="true",this.submitButton.classList.add("is-loading");let t=!1;var i,s=await fetch(e);s.ok&&((i=document.createElement("template")).innerHTML=await s.text(),(s=i.content.querySelector("[data-num-results]"))?0===(s=parseInt(s.dataset.numResults,10))?(this.submitButton.textContent=theme.strings.quickNav.show_products_none,t=!0):this.submitButton.textContent=(1===s?theme.strings.quickNav.button_one:theme.strings.quickNav.button_other).replace("[quantity]",s):console.warn("Enterprise Theme: An element with [data-num-results] could not be found on the product page.",e),this.dataset.showPrice)&&((s=i.content.querySelector("price-range"))?(this.priceRange.innerHTML=s.outerHTML,i=this.priceRange.querySelector(".price-range").clientHeight,this.priceRange.style.maxHeight=parseInt(i,10)+1+"px"):console.warn("Enterprise Theme: No price ranger slider could be found for collection.",e)),t||this.submitButton.removeAttribute("aria-disabled"),this.submitButton.classList.remove("is-loading")}unparseCollectionInfo(){this.priceRange&&(this.priceRange.style.maxHeight="0px"),this.submitButton.textContent=theme.strings.quickNav.button_standard}static prepareSelect(e,t){let i=!1,s=0;e.querySelectorAll(".custom-select__option:not(.quick-nav__default-option)").forEach(e=>{e.dataset.parentHandle===t?(i=!0,e.style.display="",s+=1):e.style.display="none"}),e.querySelector(".quick-nav__listbox").setAttribute("data-link-count",s<5?s:"loads"),a.resetSelect(e,!i),i&&e.querySelector(".custom-select__btn").removeAttribute("disabled")}updateSubmitButton(e){e&&0<e.length&&"#"!==e?(this.submitButton.href=e,this.submitButton.removeAttribute("aria-disabled")):(this.submitButton.href="#",this.submitButton.setAttribute("aria-disabled","true"))}static resetSelect(e,t){var i;e&&(e.querySelector(".custom-select__listbox").removeAttribute("aria-activedescendant"),(i=e.querySelector('[aria-selected="true"]'))&&i.setAttribute("aria-selected","false"),(i=e.querySelector(".custom-select__btn span")).textContent=i.dataset.defaultText,t&&e.querySelector(".custom-select__btn").setAttribute("disabled","disabled"),e.init())}}customElements.define("quick-nav",a)}