/*
Generated time: March 25, 2025 10:34
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("pickup-availability")){class a extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.refreshHandler=this.handleRefreshBtnClick.bind(this),this.unavailableHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.getAvailability(this.dataset.variantId))}handleRefreshBtnClick(){this.getAvailability(this.dataset.variantId)}async getAvailability(t){let e=this.dataset.rootUrl;e.endsWith("/")||(e+="/");try{var i=await fetch(e+`variants/${t}/?section_id=pickup-availability`);if(!i.ok)throw new Error(i.status);var r=document.createElement("template");r.innerHTML=await i.text(),this.renderPickupInfo(r.content.querySelector(".shopify-section"))}catch(e){t=this.querySelector(".js-refresh");t&&t.removeEventListener("click",this.refreshHandler),this.renderUnavailableMsg()}}renderPickupInfo(t){var e=document.querySelector(".js-pickup-drawer");if(e&&e.remove(),t.querySelector(".pickup-status")){this.setAttribute("available",""),this.innerHTML=t.querySelector(".pickup-status").outerHTML,document.body.appendChild(t.querySelector(".js-pickup-drawer"));let e=this.querySelector(".js-show-pickup-info");e&&e.addEventListener("click",()=>{document.querySelector(".js-pickup-drawer").open(e)})}else this.innerHTML="",this.removeAttribute("available")}renderUnavailableMsg(){this.innerHTML="",this.appendChild(this.unavailableHtml),this.querySelector(".js-refresh").addEventListener("click",this.refreshHandler)}}customElements.define("pickup-availability",a)}