/*
Generated time: March 25, 2025 10:34
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("shipping-calculator")){class a extends HTMLElement{constructor(){super(),this.button=this.querySelector("button"),this.button.addEventListener("click",this.handleSubmit.bind(this))}init(){this.country=this.querySelector(".js-country-select"),this.province=this.querySelector(".js-province-select"),this.zip=this.querySelector(".js-zip-input"),this.rates=this.querySelector(".js-rates"),this.errors=this.querySelector(".js-errors"),this.initialised=!0}async handleSubmit(t){t.preventDefault(),this.initialised||this.init(),this.errors.hidden=!0,this.rates.hidden=!0,this.button.disabled=!0,this.button.classList.add("is-loading");t=`shipping_address[zip]=${this.zip.value}&shipping_address[country]=${this.country.value}&shipping_address[province]=`+this.province.value;try{var s=await fetch(theme.routes.cart+"/shipping_rates.json?"+t),e=await s.json();s.ok?this.showRates(e):this.showErrors(e)}catch(t){console.log(t)}finally{this.button.classList.remove("is-loading"),this.button.disabled=!1}}showRates(t){var s=this.rates.querySelector(".js-rates-heading"),i=this.rates.querySelector(".js-rates-text");if(i.innerHTML="",t.shipping_rates&&t.shipping_rates.length){var r=1===t.shipping_rates.length?"singleRate":"multipleRates";let e="";t.shipping_rates.forEach(t=>{var s=theme.settings.moneyWithCurrencyFormat.replace(/\{\{\s*(\w+)\s*\}\}/,t.price);e+=`<li>${t.name}: ${s}</li>`}),s.hidden=!1,s.textContent=theme.strings.shippingCalculator[r],i.innerHTML=`<ul class="styled-list">${e}</ul>`}else s.hidden=!0,i.innerHTML=theme.strings.shippingCalculator.noRates;this.rates.hidden=!1}showErrors(s){let e="";Object.keys(s).forEach(t=>{e+=`<li>${s[t]}</li>`}),this.errors.querySelector(".js-errors-text").innerHTML=`<ul class="styled-list">${e}</ul>`,this.errors.hidden=!1}}customElements.define("shipping-calculator",a)}