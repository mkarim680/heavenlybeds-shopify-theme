/*
Generated time: September 29, 2025 15:03
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("facet-filters")){class a extends SideDrawer{connectedCallback(){this.init()}disconnectedCallback(){window.removeEventListener("popstate",this.historyChangeHandler),this.breakpointChangeHandler&&window.removeEventListener("on:breakpoint-change",this.breakpointChangeHandler)}init(){this.filteringEnabled="true"===this.dataset.filtering,this.sortingEnabled="true"===this.dataset.sorting,this.form=document.getElementById("facets"),this.results=document.getElementById("filter-results"),this.filteringEnabled&&(this.filters=this.querySelector(".facets__filters"),this.activeFilters=this.querySelector(".facets__active-filters"),this.activeFiltersList=this.querySelector(".active-filters"),this.activeFiltersHeader=this.querySelector(".active-filters-header"),this.footer=this.querySelector(".facets__footer")),this.sortingEnabled&&(this.mobileSortByOptions=this.querySelectorAll(".js-drawer-sort-by"),this.desktopSortBy=document.querySelector(".products-toolbar__sort")),this.handleBreakpointChange(),this.addListeners()}addListeners(){this.filteringEnabled&&(this.breakpointChangeHandler=this.breakpointChangeHandler||this.handleBreakpointChange.bind(this),this.filters.addEventListener("click",this.handleFiltersClick.bind(this)),this.filters.addEventListener("input",debounce(this.handleFilterChange.bind(this),500)),this.activeFilters.addEventListener("click",this.handleActiveFiltersClick.bind(this)),window.addEventListener("on:breakpoint-change",this.breakpointChangeHandler)),this.sortingEnabled&&this.desktopSortBy.addEventListener("change",this.handleFilterChange.bind(this)),this.historyChangeHandler=this.historyChangeHandler||this.handleHistoryChange.bind(this),window.addEventListener("popstate",this.historyChangeHandler)}handleBreakpointChange(){theme.mediaMatches.lg?(this.setAttribute("open",""),this.setAttribute("aria-hidden","false"),this.removeAttribute("aria-modal"),this.removeAttribute("role")):(this.close(),this.setAttribute("role","dialog"),this.setAttribute("aria-modal","true"),this.setAttribute("aria-hidden","true"),this.hidden=!1)}handleFilterChange(i){var e=new FormData(this.form);let r=new URLSearchParams(e),a=[];if(this.sortingEnabled){let t=r.get("sort_by");"CUSTOM-SELECT"===i.target.tagName&&this.mobileSortByOptions.forEach(e=>{e.checked=e.value===i.detail.selectedValue,t=i.detail.selectedValue}),r.set("sort_by",t)}r.forEach((e,t)=>{e||a.push(t)}),a.forEach(e=>{r.delete(e)}),this.applyFilters(r.toString(),i)}handleFiltersClick(e){var t=e.target;t.matches(".js-clear-filter")&&(e.preventDefault(),this.applyFilters(new URL(e.target.href).searchParams.toString(),e)),t.matches(".js-show-more")&&(e=t.closest(".filter"),t.remove(),e.querySelectorAll("li").forEach(e=>{e.classList.remove("js-hidden")}))}handleActiveFiltersClick(e){"A"===e.target.tagName&&(e.preventDefault(),this.applyFilters(new URL(e.target.href).searchParams.toString(),e))}handleHistoryChange(t){if(null!==t.state){let e="";t.state&&t.state.searchParams&&({searchParams:e}=t.state),this.applyFilters(e,null,!1)}}async applyFilters(e,t,i=!0){var r=document.querySelector("custom-pagination"),s=(r&&(r.dataset.pauseInfiniteScroll="true"),this.results.classList.add("is-loading"),this.querySelector(".js-close-drawer-mob")),n=(s.ariaDisabled="true",s.classList.add("is-loading"),await fetch(window.location.pathname+"?"+e));if(n.ok){var l=document.createElement("template");if(l.innerHTML=await n.text(),this.filteringEnabled&&this.updateFilters(l.content,t),s.innerText=l.content.querySelector(".js-close-drawer-mob").innerText,this.results.innerHTML=l.content.getElementById("filter-results").innerHTML,"function"==typeof initLazyImages&&initLazyImages(),r&&r.reload&&r.reload(),i&&a.updateURL(e),this.results.getBoundingClientRect().top<0){let e=0;document.querySelector('store-header[data-is-sticky="true"]')&&(e=Number.parseInt(getComputedStyle(this.parentElement).getPropertyValue("--header-height").replace("px",""),10)||0),window.scrollTo({top:this.results.getBoundingClientRect().top+window.scrollY-e-45,behavior:"smooth"})}s.classList.remove("is-loading"),s.removeAttribute("aria-disabled"),r&&(r.dataset.pauseInfiniteScroll="false"),document.dispatchEvent(new CustomEvent("on:facet-filters:updated"),{bubbles:!0})}this.results.classList.remove("is-loading")}updateFilters(r,s){document.querySelectorAll(".filter").forEach(e=>{var t,i=e.dataset.index,i=r.querySelector(`.filter[data-index="${i}"]`);"sort"!==e.dataset.type&&("price_range"===e.dataset.type?(a.updateFilter(e,i,!1),s&&"INPUT"===s.target.tagName||e.querySelectorAll("input").forEach(e=>{e.value=r.getElementById(e.id).value})):s&&"INPUT"===s.target.tagName?(t=s.target.closest(".filter"))&&t.dataset&&a.updateFilter(e,i,e.dataset.index!==t.dataset.index):a.updateFilter(e,i,!0))}),this.updateActiveFilters(r);var e=r.querySelector(".facets__footer");this.footer.innerHTML=e.innerHTML}static updateFilter(e,t,i){t?(e.hidden=!1,i?e.innerHTML=t.innerHTML:(e.replaceChild(t.querySelector(".filter__toggle"),e.querySelector(".filter__toggle")),e.querySelector(".filter__header").innerHTML=t.querySelector(".filter__header").innerHTML)):e.hidden=!0}updateActiveFilters(e){var t=e.querySelector(".active-filters"),e=e.querySelector(".active-filters-header");this.activeFiltersList.innerHTML=t.innerHTML,this.activeFiltersHeader.innerHTML=e.innerHTML,this.activeFilters.hidden=!this.activeFiltersList.querySelector(".active-filter")}static updateURL(e){window.history.pushState({searchParams:e},"",""+window.location.pathname+(e&&"?".concat(e)))}}customElements.define("facet-filters",a)}