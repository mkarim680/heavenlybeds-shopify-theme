/*
Generated time: September 29, 2025 15:03
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("media-gallery")){class a extends HTMLElement{constructor(){super(),Shopify.designMode?setTimeout(()=>this.init(),200):this.init()}disconnectedCallback(){window.removeEventListener("on:debounced-resize",this.resizeHandler),this.resizeInitHandler&&window.removeEventListener("on:debounced-resize",this.resizeInitHandler),this.zoomInitHandler&&window.removeEventListener("on:debounced-resize",this.zoomInitHandler)}init(){this.section=this.closest(".js-product"),this.mediaGroupingEnabled=this.hasAttribute("data-media-grouping-enabled")&&this.getMediaGroupData(),this.stackedScroll=this.dataset.stackedScroll,this.stackedUnderline="true"===this.dataset.stackedUnderline&&!this.mediaGroupingEnabled,this.isFeatured="true"===this.dataset.isFeatured,this.viewer=this.querySelector(".media-viewer"),this.thumbs=this.querySelector(".media-thumbs"),this.thumbsItems=this.querySelectorAll(".media-thumbs__item"),this.controls=this.querySelector(".media-ctrl"),this.prevBtn=this.querySelector('.media-ctrl__btn[name="prev"]'),this.nextBtn=this.querySelector('.media-ctrl__btn[name="next"]'),this.counterCurrent=this.querySelector(".media-ctrl__current-item"),this.counterTotal=this.querySelector(".media-ctrl__total-items"),this.liveRegion=this.querySelector(".media-gallery__status"),this.zoomLinks=this.querySelectorAll(".js-zoom-link"),this.loadingSpinner=this.querySelector(".loading-spinner"),this.xrButton=this.querySelector(".media-xr-button"),this.mediaGroupingEnabled&&this.setActiveMediaGroup(this.getMediaGroupFromOptionSelectors()),"stacked"===this.dataset.layout&&theme.mediaMatches.md?(this.resizeInitHandler=this.resizeInitHandler||this.initGallery.bind(this),window.addEventListener("on:debounced-resize",this.resizeInitHandler),this.setVisibleItems(),this.previousMediaItem=this.querySelector(".media-viewer__item.is-current-variant"),setTimeout(()=>this.customSetActiveMedia(this.previousMediaItem,"always"===this.stackedScroll),200)):this.initGallery(),this.zoomLinks&&(this.zoomInitHandler=this.zoomInitHandler||this.initZoom.bind(this),this.zoomEventListener=this.zoomEventListener||this.handleZoomMouseMove.bind(this),window.addEventListener("on:debounced-resize",this.zoomInitHandler),this.initZoom(),this.zoomLinks.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault()})})),this.section.addEventListener("on:variant:change",this.onVariantChange.bind(this))}onVariantChange(e){this.mediaGroupingEnabled&&this.setActiveMediaGroup(this.getMediaGroupFromOptionSelectors()),e.detail.variant&&e.detail.variant.featured_media&&(e=this.viewer.querySelector(`[data-media-id="${e.detail.variant.featured_media.id}"]`),this.customSetActiveMedia(e,!0))}getMediaGroupFromOptionSelectors(){var e=this.section.querySelectorAll(".option-selector");return e.length>this.getMediaGroupData().groupOptionIndex?"dropdown"===(e=e[this.getMediaGroupData().groupOptionIndex]).dataset.selectorType?e.querySelector(".custom-select__btn").textContent.trim():e.querySelector("input:checked").value:null}getMediaGroupData(){var e;return void 0===this.variantMediaData&&(e=this.querySelector(".js-data-variant-media"),this.variantMediaData=!!e&&JSON.parse(e.textContent)),this.variantMediaData}getMediaGroupMap(){if(!this.mediaGroupMap){this.mediaGroupMap={groups:{}};let i=this.getMediaGroupData(),s=!1;this.viewerItems=this.querySelectorAll(".media-viewer__item"),this.viewerItems.forEach(t=>{for(let e=0;e<i.variantMedia.length;e+=1)parseInt(t.dataset.mediaId,10)===i.variantMedia[e].mediaId&&s!==i.variantMedia[e].option&&(s=i.variantMedia[e].option);var e;s&&(this.mediaGroupMap.groups[s]||(this.mediaGroupMap.groups[s]={name:s,items:[]}),e={main:t},this.thumbs&&(e.thumb=this.thumbs.querySelector(`[data-media-id="${t.dataset.mediaId}"].media-thumbs__item`)),this.mediaGroupMap.groups[s].items.push(e))}),this.mediaGroupMap.groupFromItem=t=>{var i=Object.keys(this.mediaGroupMap.groups);for(let e=0;e<i;e+=1){var s=i[e];for(let e=0;e<this.mediaGroupMap.groups[s].items.length;e+=1)if(this.mediaGroupMap.groups[s].items[e]===t)return this.mediaGroupMap.groups[s]}return this.mediaGroupMap.groups[Object.keys(this.mediaGroupMap.groups)[0]]}}return this.mediaGroupMap}setActiveMediaGroup(e){var t=this.getMediaGroupMap(),e=e?t.groups[e]:t.groupFromItem(this.currentItem);if(e){if(this.currentGroup!==e){this.currentGroup=e,this.viewerItems.forEach(e=>{e.style.display="none",e.classList.remove("media-viewer__item--single")}),this.thumbsItems.forEach(e=>{e.style.display="none"});let t=!1;e.items.forEach(e=>{e.main.style.display="",e.thumb&&(e.thumb.style.display=""),e.main===this.currentItem&&(t=!0)}),this.setVisibleItems(),t||this.customSetActiveMedia(e.items[0].main,!0),1===e.items.length&&e.items[0].main.classList.add("media-viewer__item--single")}}else this.viewerItems.forEach(e=>{e.style.display=""}),this.thumbsItems.forEach(e=>{e.style.display=""})}initGallery(){var e;this.setVisibleItems(),this.visibleItems.length<=1||(this.viewerItemOffset=this.visibleItems[1].offsetLeft-this.visibleItems[0].offsetLeft,this.currentIndex=Math.round(this.viewer.scrollLeft/this.viewerItemOffset),this.currentItem=this.visibleItems[this.currentIndex],this.addListeners(),this.thumbs&&this.currentItem&&(this.currentThumb=this.thumbs.querySelector(`[data-media-id="${this.currentItem.dataset.mediaId}"]`)),!this.isFeatured&&document.hasFocus()&&this.viewer.querySelectorAll('.product-image[loading="lazy"]').forEach((e,t)=>{setTimeout(()=>{e.loading="eager"},500*(t+1))}),e=this.querySelector(".media-viewer__item.is-current-variant"),this.customSetActiveMedia(e,!0))}addListeners(){this.viewer.addEventListener("scroll",this.handleScroll.bind(this)),this.controls&&this.controls.addEventListener("click",this.handleNavClick.bind(this)),this.thumbs&&this.thumbs.addEventListener("click",this.handleThumbClick.bind(this)),this.resizeHandler=this.resizeHandler||this.handleResize.bind(this),window.addEventListener("on:debounced-resize",this.resizeHandler)}initZoom(){this.zoomLinks.forEach(e=>{var t=Number(e.querySelector(".zoom-image").dataset.originalWidth||0),i=e.querySelector(".product-image").getBoundingClientRect().width;theme.mediaMatches.md&&i<t-75?(e.addEventListener("mousemove",this.zoomEventListener),e.classList.remove("pointer-events-none")):(e.removeEventListener("mousemove",this.zoomEventListener),e.classList.add("pointer-events-none"))})}handleZoomMouseMove(e){let t=e.currentTarget,i=t.querySelector(".js-zoom-image");if(i.dataset.src){this.loadingSpinner.classList.remove("loading-spinner--out");let e=new Image;e.src=i.dataset.src,e.onload=()=>{i.src=e.src,t.classList.remove("media--zoom-not-loaded"),this.loadingSpinner.classList.add("loading-spinner--out")},i.removeAttribute("data-src")}try{var s=e.offsetX||e.touches[0].pageX,r=e.offsetY||e.touches[0].pageY,a=s/i.offsetWidth*100,n=r/i.offsetHeight*100;i.style.objectPosition=a+`% ${n}%`}catch(e){}}handleScroll(){var e=Math.round(this.viewer.scrollLeft/this.viewerItemOffset);e!==this.currentIndex&&this.visibleItems[1].offsetLeft-this.visibleItems[0].offsetLeft===this.viewerItemOffset&&this.customSetActiveMedia(this.visibleItems[e],!1)}handleNavClick(e){e.target.matches(".media-ctrl__btn")&&(e=e.target===this.nextBtn?this.visibleItems[this.currentIndex+1]:this.visibleItems[this.currentIndex-1],this.viewer.scrollTo({left:e.offsetLeft,behavior:"smooth"}))}handleThumbClick(e){var e=e.target.closest("[data-media-id]");e&&(e=this.querySelector(`[data-media-id="${e.dataset.mediaId}"]`),this.customSetActiveMedia(e),a.playActiveMedia(e))}handleResize(){this.viewerItemOffset=this.visibleItems[1].offsetLeft-this.visibleItems[0].offsetLeft,this.thumbs&&this.currentThumb&&this.checkThumbVisibilty(this.currentThumb)}setActiveMedia(){}customSetActiveMedia(e,t=!0){var i;e!==this.currentItem&&(window.pauseAllMedia(this),this.currentItem=e,this.currentIndex=this.visibleItems.indexOf(this.currentItem),"stacked"===this.dataset.layout&&theme.mediaMatches.md?(this.stackedUnderline&&(this.previousMediaItem&&this.previousMediaItem.classList.remove("is-active"),e.classList.add("is-active"),this.previousMediaItem=e),"never"!==this.stackedScroll&&(i=e.getBoundingClientRect().top+document.documentElement.scrollTop-150,300<Math.abs(i-document.documentElement.scrollTop))&&window.scrollTo({top:i<100?0:i,behavior:"smooth"})):(t&&this.viewer.scrollTo({left:this.currentItem.offsetLeft}),this.thumbs&&this.setActiveThumb(),this.controls&&(this.prevBtn&&(this.prevBtn.disabled=0===this.currentIndex),this.nextBtn&&(this.nextBtn.disabled=this.currentIndex===this.visibleItems.length-1),this.counterCurrent)&&(this.counterCurrent.textContent=this.currentIndex+1),this.announceLiveRegion(this.currentItem,this.currentIndex+1),this.xrButton&&"model"===e.dataset.mediaType&&(this.xrButton.dataset.shopifyModel3dId=e.dataset.mediaId)))}setActiveThumb(){this.currentThumb=this.thumbs.querySelector(`[data-media-id="${this.currentItem.dataset.mediaId}"]`);var e=this.currentThumb.querySelector("button");this.thumbs.querySelectorAll(".media-thumbs__btn").forEach(e=>{e.classList.remove("is-active"),e.removeAttribute("aria-current")}),e.classList.add("is-active"),e.setAttribute("aria-current","true"),this.checkThumbVisibilty(this.currentThumb)}setVisibleItems(){this.viewerItems=this.querySelectorAll(".media-viewer__item"),this.visibleItems=Array.from(this.viewerItems).filter(e=>0<e.clientWidth),this.counterTotal&&(this.counterTotal.textContent=this.visibleItems.length)}checkThumbVisibilty(e){var t=this.thumbs.scrollLeft,i=this.thumbs.clientWidth+t,s=e.offsetLeft;(i<s+e.clientWidth||s<t)&&this.thumbs.scrollTo({left:s,behavior:"smooth"})}announceLiveRegion(e,t){e.querySelector(".media-viewer img")&&(this.liveRegion.setAttribute("aria-hidden","false"),this.liveRegion.innerHTML=theme.strings.imageAvailable.replace("[index]",t),setTimeout(()=>{this.liveRegion.setAttribute("aria-hidden","true")},2e3))}static playActiveMedia(e){window.pauseAllMedia();e=e.querySelector("deferred-media");e&&e.loadContent()}}customElements.define("media-gallery",a)}