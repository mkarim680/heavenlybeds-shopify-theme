/*
Generated time: March 25, 2025 10:34
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
if(!customElements.get("cart-items")){class a extends HTMLElement{constructor(){super(),"false"===this.dataset.empty&&this.init()}init(){this.fetchRequestOpts={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}},this.cartDrawer=document.getElementById("cart-drawer"),this.itemStatus=document.getElementById("cart-line-item-status"),this.currentTotalItemCount=Array.from(this.querySelectorAll('[name="updates[]"]')).reduce((t,e)=>t+parseInt(e.value,10),0),this.currentQuantities=[],this.querySelectorAll(".cart-item").forEach(t=>{this.currentQuantities[t.dataset.variantId]=Number(t.querySelector(".qty-input__input").value)}),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("change",debounce(this.handleChange.bind(this)))}handleClick(t){t.target.matches(".js-remove-item")&&(t.preventDefault(),this.updateQuantity(t.target.dataset.index,0))}handleChange(t){this.updateQuantity(t.target.dataset.index,t.target.value,document.activeElement.name)}async updateQuantity(e,t,r){let s=this.cartDrawer?this.cartDrawer.querySelector(".drawer__content"):null,i=s?s.scrollTop:0,n=this.cartDrawer?this.cartDrawer.scrollTop:0;this.enableLoading(e);var c="line-item-error-"+e,o=document.getElementById(c),c=(document.querySelectorAll(`.cart-errors, .cart-item__error:not([id="${c}"])`).forEach(t=>{t.innerHTML="",t.hidden=!0}),this.getSectionsToRender().map(t=>t.section));this.fetchRequestOpts.body=JSON.stringify({line:e,quantity:t,sections:[...new Set(c)],sections_url:window.location.pathname});try{var d=document.getElementById("cart-item-"+e),m=Number(d.dataset.variantId),l=this.currentTotalItemCount,u=await fetch(theme.routes.cartChange,this.fetchRequestOpts);let i=await u.json();if(!u.ok)throw new Error(i.errors||u.status);var h,p,y,g,w=i.item_count;this.cartDrawer?(s.classList.toggle("drawer__content--flex",0===w),0===w&&(h=this.cartDrawer.querySelector("product-recommendations"))&&h.remove()):0===w&&((p=this.closest(".cc-main-cart").querySelector(".js-cart-title"))&&(p.style.textAlign="center"),(y=document.getElementById("cart-summary-css"))&&y.remove(),g=document.getElementById("cart-summary"))&&(g.hidden=!0),this.getSectionsToRender().forEach(t=>{var e,r=document.getElementById(t.id);r&&(e=t.selector,(r.querySelector(e)||r).innerHTML=a.getElementHTML(i.sections[t.section],e))}),this.cartDrawer&&0===w&&(s.classList.add("grow","flex","items-center"),this.cartDrawer.querySelector("promoted-products"))&&this.cartDrawer.querySelector(".drawer__content").classList.toggle("drawer__empty-with-promotions",0===w),window.initLazyImages(),this.updateRecommendations(0<i.item_count?i.items[0].product_id:null),this.updateLiveRegions(),this.setFocus(e,w,r),this.dataset.empty=0===w,l!==(this.currentTotalItemCount=w)&&this.dispatchEvent(new CustomEvent("on:line-item:change",{bubbles:!0,detail:{cart:i,variantId:m,oldQuantity:this.currentQuantities[m],newQuantity:Number(t)}})),this.currentQuantities[m]=Number(t),o.innerHTML="",o.hidden=!0}catch(t){/^[0-9]+$/.test(t.message)?o.textContent=theme.strings.cartError:o.textContent=t.message,o.hidden=!1,console.log(t),this.querySelectorAll(".cart-item__loader").forEach(t=>{t.hidden=!0}),this.dispatchEvent(new CustomEvent("on:cart:error",{bubbles:!0,detail:{error:t.message}}));var E=document.getElementById("quantity-"+e);E.value=E.dataset.initialValue,E.closest("quantity-input").currentQty=E.dataset.initialValue}finally{this.classList.remove("pointer-events-none"),s&&(requestAnimationFrame(()=>{s.scrollTop=i}),setTimeout(()=>{s.scrollTop=i},0),requestAnimationFrame(()=>{this.cartDrawer.scrollTop=n}),setTimeout(()=>{this.cartDrawer.scrollTop=n},0))}}async refresh(){var e=document.getElementById("cart-errors");try{var t=this.getSectionsToRender().map(t=>t.section),i=await fetch("?sections="+[...new Set(t)]);if(400===i.status&&this.cartDrawer)this.cartDrawer.refresh(!0);else{let r=await i.json();if(!i.ok)throw new Error(i.status);this.getSectionsToRender().forEach(t=>{var e=document.getElementById(t.id);e&&((e.querySelector(t.selector)||e).innerHTML=a.getElementHTML(r[t.section],t.selector))});var s=this.querySelector(".cart-item:first-child");this.updateRecommendations(s?s.dataset.productId:null),window.initLazyImages(),e.innerHTML="",e.hidden=!0}}catch(t){e.textContent=theme.strings.cartError,e.hidden=!1,console.log(t),this.dispatchEvent(new CustomEvent("on:cart:error",{bubbles:!0,detail:{error:t.message}}))}}getSectionsToRender(){let t=[{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"free-shipping-notice",section:"free-shipping-notice",selector:".free-shipping-notice"}];var e;return t=this.cartDrawer?(e=this.cartDrawer.closest(".shopify-section").id.replace("shopify-section-",""),[...t,{id:"cart-items",section:e,selector:"cart-items"},{id:"cart-promoted-products",section:e,selector:"#cart-promoted-products"},{id:"cart-drawer",section:e,selector:".cart-drawer__summary"},{id:"cart-drawer-media-promotion",section:e,selector:"#cart-drawer-media-promotion"}]):[...t,{id:"cart-items",section:this.dataset.section,selector:"cart-items"},{id:"cart-summary",section:document.getElementById("cart-summary").dataset.section,selector:".cart__summary"}]}static getElementHTML(t,e){var r=document.createElement("template"),t=(r.innerHTML=t,r.content.querySelector(e));return t?t.innerHTML:""}enableLoading(t){this.classList.add("pointer-events-none");t=this.querySelector(`#cart-item-${t} .cart-item__loader`);t&&(t.hidden=!1),document.activeElement.blur(),this.itemStatus&&this.itemStatus.setAttribute("aria-hidden","false")}updateRecommendations(t){this.recommendations=this.recommendations||document.getElementById("cart-recommendations"),this.recommendations&&(t?(this.recommendations.dataset.productId=t,this.recommendations.init()):this.recommendations.innerHTML="")}updateLiveRegions(){this.itemStatus.setAttribute("aria-hidden","true");let t=document.getElementById("cart-live-region-text");t.setAttribute("aria-hidden","false"),setTimeout(()=>{t.setAttribute("aria-hidden","true")},1e3)}setFocus(t,e,r){t=document.getElementById("cart-item-"+t);let i;t&&(i=t.querySelector(`[name="${r}"]`)),this.cartDrawer?t&&i?trapFocus(this.cartDrawer,i):0===e?trapFocus(this.cartDrawer.querySelector(".js-cart-empty"),this.cartDrawer.querySelector("a")):this.cartDrawer.querySelector(".cart-item")&&trapFocus(this.cartDrawer,document.querySelector(".js-item-name")):t&&i&&i.focus()}}customElements.define("cart-items",a)}