/*
Generated time: September 29, 2025 15:03
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
customElements.whenDefined("details-modal").then(()=>{class t extends DetailsModal{constructor(){super(),this.compareContainer=this.querySelector(".compare-container"),this.compareArea=this.compareContainer.querySelector(".js-compare-area"),this.loadingSpinner=this.compareContainer.querySelector(".loading-spinner"),this.closeButton=this.querySelectorAll(".js-compare-close"),this.bindEvents()}disconnectedCallback(){document.removeEventListener("focusin",this.clickHandler),Shopify.designMode&&(document.removeEventListener("shopify:section:load",t.handleSectionChange),document.removeEventListener("on:product-compare:reload",this.compareReloadHandler))}bindEvents(){this.addEventListener("on:product-compare-modal:open",this.open),this.clickHandler=this.handleClick.bind(this),document.addEventListener("click",this.clickHandler),this.closeButton.forEach(e=>{e.addEventListener("click",this.close.bind(this))}),Shopify.designMode&&(this.compareReloadHandler=this.renderCompareTable.bind(this),document.addEventListener("shopify:section:load",t.handleSectionChange),document.addEventListener("on:product-compare:reload",this.compareReloadHandler))}handleClick(e){e.target.classList.contains("js-compare-col-remove")&&(e.preventDefault(),CompareUtil.removeFromCompare(e.target.dataset.productId.toString(),!0),e=CompareUtil.getCompareCount(),1===(this.compareContainer.dataset.compareCount=e))&&this.close()}open(){this.modal.classList.remove("hidden"),this.renderCompareTable(),super.open()}handleTransitionEnd(e){super.handleTransitionEnd(e),!1===this.modal.open&&this.modal.classList.add("hidden")}static handleSectionChange(e){e.target.matches(".cc-compare")&&setTimeout(()=>{document.dispatchEvent(new CustomEvent("on:product-compare:reload"))},1e3)}async renderCompareTable(){this.loadingSpinner.removeAttribute("hidden"),this.loadingSpinner.removeAttribute("aria-hidden"),this.compareArea.classList.remove("revealable--in"),this.compareArea.innerHTML="";var e=CompareUtil.getSelectedProducts();if(e){this.compareContainer.dataset.compareCount=e.length;e=await t.getCompareProducts(e);let a=[];if(0<e.length){e.forEach(e=>{var t=document.implementation.createHTMLDocument();t.documentElement.innerHTML=e,t.querySelectorAll(".shopify-section > div").forEach(e=>{a[e.dataset.compareKey]||(a[e.dataset.compareKey]=[]),a[e.dataset.compareKey].push(e)})});let n=document.createElement("div");n.className="compare-temp",Object.entries(a).forEach(([e,a])=>{if(theme.settings.compareShowEmptyMetafields||!a.every(e=>!!e.dataset.isEmptyMetafield)){let t=document.createElement("div");t.className="compare-row compare-row--"+(e.includes("metafield")?"metafield":e.replace("compare-","")),a.forEach(e=>t.appendChild(e)),n.appendChild(t)}}),this.compareArea.innerHTML=n.innerHTML}else this.compareArea.innerHTML="Unable to compare products."+(Shopify.designMode?" Ensure the Product Compare section is enabled.":" Please try again later.");setTimeout(()=>{this.loadingSpinner.setAttribute("hidden","true"),this.loadingSpinner.setAttribute("aria-hidden","true"),this.compareArea.classList.add("revealable--in")},100)}}static async getCompareProducts(e){let n=[],t=(await Promise.all(e.map(async e=>{var t,a=await fetch(""+e.url);a.ok&&((t=document.createElement("template")).innerHTML=await a.text(),a=t.content.querySelector(".cc-compare"))&&(n[e.id]=a.outerHTML)})),[]);return 0<Object.keys(n).length&&e.forEach(e=>t.push(n[e.id])),t}}customElements.define("compare-modal",t)});